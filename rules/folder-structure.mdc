---
description: Creva Folder Structure - Clean Architecture Organization
applies_to:
  - "**/*.dart"
  - "lib/**"
---

# Creva Folder Structure

## ğŸ—ï¸ Clean Architecture Overview

Creva follows **Clean Architecture** principles with clear separation between presentation, domain, and data layers.

```
Creva/
â”œâ”€â”€ lib/                      # Flutter application code
â”‚   â”œâ”€â”€ domain/              # Business logic (platform-agnostic)
â”‚   â”œâ”€â”€ presentation/        # UI layer
â”‚   â”œâ”€â”€ routing/             # Navigation
â”‚   â””â”€â”€ main.dart            # App entry point
â”œâ”€â”€ android/                 # Android platform code
â”œâ”€â”€ ios/                     # iOS platform code
â”œâ”€â”€ assets/                  # Images, fonts, etc.
â”œâ”€â”€ test/                    # Unit & widget tests
â””â”€â”€ integration_test/        # Integration tests
```

## ğŸ“ Detailed Structure

### `/lib` - Main Application Code

```
lib/
â”œâ”€â”€ domain/                         # Business Logic Layer
â”‚   â”œâ”€â”€ models/                    # Data models
â”‚   â”‚   â””â”€â”€ firestore/
â”‚   â”‚       â””â”€â”€ video/
â”‚   â”‚           â”œâ”€â”€ video.dart                    # Main video model
â”‚   â”‚           â”œâ”€â”€ video.freezed.dart            # Generated code
â”‚   â”‚           â”œâ”€â”€ video.g.dart                  # JSON serialization
â”‚   â”‚           â”œâ”€â”€ video_item.dart               # Video item model
â”‚   â”‚           â”œâ”€â”€ topic.dart                    # Topic model
â”‚   â”‚           â”œâ”€â”€ topic.freezed.dart
â”‚   â”‚           â”œâ”€â”€ topic.g.dart
â”‚   â”‚           â”œâ”€â”€ video_source_type.dart        # Enum: tiktok|instagram
â”‚   â”‚           â””â”€â”€ video_status.dart             # Enum: planned|inProgress|completed
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/              # Data access interfaces
â”‚   â”‚   â””â”€â”€ video/
â”‚   â”‚       â”œâ”€â”€ video_repository.dart         # Video CRUD interface
â”‚   â”‚       â””â”€â”€ topic_repository.dart          # Topic interface
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  # Business services
â”‚   â”‚   â”œâ”€â”€ analytics_service.dart               # Analytics wrapper
â”‚   â”‚   â”œâ”€â”€ remote_config_service.dart           # Firebase Remote Config
â”‚   â”‚   â”œâ”€â”€ app_groups_service.dart              # App Groups (iOS share extension)
â”‚   â”‚   â””â”€â”€ share_extension_service.dart         # Share extension integration
â”‚   â”‚
â”‚   â”œâ”€â”€ logger/                    # Logging utility
â”‚   â”‚   â””â”€â”€ logger.dart
â”‚   â”‚
â”‚   â””â”€â”€ exceptions/                # Custom exceptions
â”‚       â””â”€â”€ request_exception.dart
â”‚
â”œâ”€â”€ presentation/                   # UI Layer
â”‚   â”œâ”€â”€ pages/                     # Full-screen pages
â”‚   â”‚   â”œâ”€â”€ videos/
â”‚   â”‚   â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ videos_page.dart            # Main video list
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ video_detail_page/          # Video details (directory)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ edit_video_page/            # Edit video (directory)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ topics_home_page.dart       # Topics home
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ topic_videos_page.dart      # Topic videos list
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calendar_page.dart          # Calendar view
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ widgets/                    # Video-specific widgets
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ bottom_sheets/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ topic/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ video/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ cubit/              # Videos state management
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_page.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ screens/                    # Onboarding screen components
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ widgets/                    # Onboarding widgets
â”‚   â”‚   â”‚   â”œâ”€â”€ cubit/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                   # Authentication pages
â”‚   â”‚   â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sign_in_page.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sign_up_page.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ forgot_password_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ cubit/              # Auth state management
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ cubit/              # Settings state management
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ splash/
â”‚   â”‚       â”œâ”€â”€ view/
â”‚   â”‚       â”‚   â””â”€â”€ splash_page.dart
â”‚   â”‚       â””â”€â”€ cubit/              # Splash state management
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/                   # Shared widgets
â”‚   â”‚   â”œâ”€â”€ loading_indicator.dart
â”‚   â”‚   â”œâ”€â”€ error_view.dart
â”‚   â”‚   â””â”€â”€ empty_state.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ theme/                     # App theming
â”‚   â”‚   â””â”€â”€ creva_input_decoration.dart  # Input decoration theme
â”‚   â”‚
â”‚   â”œâ”€â”€ app/                       # App-level configuration
â”‚   â”‚   â””â”€â”€ app.dart                       # MaterialApp with theme (ColorScheme)
â”‚   â”‚
â”‚   â””â”€â”€ modules/                   # Cross-cutting concerns
â”‚       â””â”€â”€ current_user_data/
â”‚           â”œâ”€â”€ current_user_data_cubit.dart
â”‚           â””â”€â”€ current_user_data_state.dart
â”‚
â”œâ”€â”€ routing/                        # Navigation
â”‚   â””â”€â”€ router.dart                # go_router configuration
â”‚
â””â”€â”€ main.dart                      # Application entry point
```

### `/android` - Android Platform Code

```
android/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ build.gradle                       # App-level Gradle config
â”‚   â”œâ”€â”€ google-services.json               # Firebase config (DO NOT COMMIT)
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ main/
â”‚           â”œâ”€â”€ AndroidManifest.xml        # App permissions & config
â”‚           â”œâ”€â”€ kotlin/
â”‚           â”‚   â””â”€â”€ com/interlock/creva/
â”‚           â”‚       â””â”€â”€ MainActivity.kt    # Main activity
â”‚           â””â”€â”€ res/                       # Android resources
â”‚               â”œâ”€â”€ mipmap-*/              # App icons
â”‚               â””â”€â”€ values/                # Strings, colors
â”‚
â””â”€â”€ build.gradle                           # Project-level Gradle
```

**Key Files**:
- `build.gradle`: Package ID (`com.interlock.creva`), SDK versions
- `AndroidManifest.xml`: Permissions (camera, storage, internet)
- `google-services.json`: Firebase configuration (excluded from git)

### `/ios` - iOS Platform Code

```
ios/
â”œâ”€â”€ Runner/
â”‚   â”œâ”€â”€ Info.plist                         # App configuration
â”‚   â”œâ”€â”€ GoogleService-Info.plist           # Firebase config (DO NOT COMMIT)
â”‚   â”œâ”€â”€ Assets.xcassets/                   # App icons & images
â”‚   â”‚   â””â”€â”€ AppIcon.appiconset/
â”‚   â”œâ”€â”€ Base.lproj/                        # Storyboards
â”‚   â”‚   â””â”€â”€ LaunchScreen.storyboard
â”‚   â””â”€â”€ Runner-Bridging-Header.h           # Objective-C bridging
â”‚
â”œâ”€â”€ Runner.xcodeproj/                      # Xcode project
â””â”€â”€ Runner.xcworkspace/                    # Xcode workspace
```

**Key Files**:
- `Info.plist`: Bundle ID (`com.interlock.creva`), permissions
- `GoogleService-Info.plist`: Firebase configuration (excluded from git)

### `/assets` - Application Assets

```
assets/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ logo.png
â”‚   â”œâ”€â”€ placeholder.png
â”‚   â””â”€â”€ onboarding/
â”‚
â””â”€â”€ icons/
    â”œâ”€â”€ recipe_icon.svg
    â””â”€â”€ category_icon.svg
```

**Configuration** in `pubspec.yaml`:
```yaml
flutter:
  assets:
    - assets/images/
    - assets/icons/
```

### `/test` - Unit & Widget Tests

```
test/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ recipe/
â”‚   â”‚       â”œâ”€â”€ recipe_test.dart
â”‚   â”‚       â””â”€â”€ recipe_category_test.dart
â”‚   â”‚
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ recipe/
â”‚           â””â”€â”€ recipe_repository_test.dart
â”‚
â””â”€â”€ presentation/
    â””â”€â”€ pages/
        â””â”€â”€ recipes/
            â”œâ”€â”€ recipes_page_test.dart
            â””â”€â”€ cubit/
                â””â”€â”€ recipes_cubit_test.dart
```

**Note**: Integration tests (`integration_test/`) are planned for future implementation.

## ğŸ“‹ File Naming Conventions

### Dart Files

**Files**:
- Snake case: `recipe_card_widget.dart`
- Match class name: `RecipeCardWidget` â†’ `recipe_card_widget.dart`

**Classes**:
```dart
// âœ… GOOD
class RecipeCard extends StatelessWidget { }     // recipe_card.dart
class RecipesCubit extends Cubit<RecipesState> { } // recipes_cubit.dart

// âŒ BAD
class recipeCard { }                             // Wrong casing
class RC extends StatelessWidget { }             // Unclear abbreviation
```

**Models with freezed**:
```dart
// recipe.dart
@freezed
class Recipe with _$Recipe { }

// Generates:
// - recipe.freezed.dart (freezed code)
// - recipe.g.dart (JSON serialization)
```

### Directories

- Lowercase with underscores: `recipe_detail/`
- Feature-based organization: `pages/recipes/`
- Layer-based grouping: `domain/models/`

## ğŸ¯ Layer-Specific Rules

### Domain Layer (`lib/domain/`)

**Purpose**: Business logic, platform-agnostic

**Rules**:
- âœ… **CAN** import: Other domain files, Dart core libraries
- âŒ **CANNOT** import: Flutter widgets, Firebase, presentation code

**Example**:
```dart
// âœ… GOOD - recipe.dart
import 'package:freezed_annotation/freezed_annotation.dart';
import 'package:creva/domain/models/recipe/recipe_source.dart';

// âŒ BAD - recipe.dart
import 'package:flutter/material.dart';           // NO Flutter in domain!
import 'package:firebase_firestore/firebase_firestore.dart'; // NO Firebase!
import 'package:creva/presentation/pages/recipes_page.dart'; // NO UI!
```

### Presentation Layer (`lib/presentation/`)

**Purpose**: UI components, state management

**Rules**:
- âœ… **CAN** import: Flutter widgets, domain models, Cubits
- âœ… **CAN** import: Presentation layer files
- âŒ **CANNOT** import: Data layer implementations

**Example**:
```dart
// âœ… GOOD - recipes_page.dart
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:creva/domain/models/recipe/recipe.dart';
import 'package:creva/presentation/pages/recipes/cubit/recipes_cubit.dart';

// âŒ BAD - recipes_page.dart
import 'package:firebase_firestore/firebase_firestore.dart'; // NO direct Firebase!
```

### Repository Implementations

**Location**: Inside repository files

**Rules**:
- âœ… **CAN** import: Firebase, domain interfaces, models
- âŒ **CANNOT** import: UI code, widgets

**Example**:
```dart
// âœ… GOOD - recipe_repository.dart
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'package:creva/domain/models/recipe/recipe.dart';

class RecipeRepository {
  final FirebaseFirestore _firestore;
  final FirebaseAuth _auth;

  // Implementation...
}
```

## ğŸ“¦ Import Organization

### Import Order

```dart
// 1. Dart SDK imports
import 'dart:async';
import 'dart:convert';

// 2. Flutter imports
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

// 3. Package imports (alphabetical)
import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:freezed_annotation/freezed_annotation.dart';

// 4. Project imports (alphabetical)
import 'package:creva/domain/models/recipe/recipe.dart';
import 'package:creva/presentation/pages/recipes/cubit/recipes_cubit.dart';

// 5. Part files (generated code)
part 'recipe.freezed.dart';
part 'recipe.g.dart';
```

### Relative vs Absolute Imports

**Always use package imports** (absolute):
```dart
// âœ… GOOD
import 'package:creva/domain/models/recipe/recipe.dart';

// âŒ BAD
import '../../domain/models/recipe/recipe.dart';
```

## ğŸ”§ Generated Files

### Freezed Models

**Source**: `recipe.dart`
**Generates**:
- `recipe.freezed.dart` - Immutable class implementation
- `recipe.g.dart` - JSON serialization

**Command**: `flutter pub run build_runner build`

**Gitignore**: Commit generated files for easier collaboration

### JSON Serialization

**Annotation**: `@JsonSerializable()`
**Generates**: `*.g.dart` files
**Command**: `flutter pub run build_runner build`

## ğŸš« Do NOT Commit

**Firebase Credentials**:
- `android/app/google-services.json`
- `ios/Runner/GoogleService-Info.plist`

**Environment Files**:
- `.env`
- `.env.local`
- `.env.production`

**Build Outputs**:
- `build/`
- `.dart_tool/`
- `.flutter-plugins`
- `.flutter-plugins-dependencies`

**IDE Files**:
- `.idea/`
- `.vscode/settings.json` (personal settings)
- `*.iml`

## âœ… Checklist Before Creating New Files

1. **Check if similar file exists**: Search codebase first
2. **Choose correct layer**: domain / presentation / routing
3. **Follow naming convention**: snake_case, descriptive name
4. **Use correct imports**: Package imports, proper order
5. **Add to version control**: `git add <file>`

## ğŸ”— Related Documentation

- **[code-style.mdc](./code-style.mdc)** - Dart/Flutter coding standards
- **[project-overview.mdc](./project-overview.mdc)** - Architecture overview
- **[api-integration.mdc](./api-integration.mdc)** - Firebase integration patterns

---

Last Updated: October 2025
